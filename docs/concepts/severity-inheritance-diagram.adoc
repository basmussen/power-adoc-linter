= Severity-Vererbung und Ãœberschreibung
:toc:
:toc-title: Inhalt
:toclevels: 3
:icons: font
:source-highlighter: rouge

[abstract]
Detaillierte ErklÃ¤rung der Severity-Hierarchie im Power AsciiDoc Linter. Verstehen Sie, wie Schweregrade vererbt und Ã¼berschrieben werden.

== ğŸ¯ Was ist Severity?

Severity (Schweregrad) bestimmt, wie kritisch eine Regelverletzung ist:

[cols="15,15,20,50", options="header"]
|===
| Level | Symbol | Exit Code | Verwendung

| `ERROR`
| ğŸ”´
| 1
| Kritische Fehler, die korrigiert werden **mÃ¼ssen**

| `WARN`
| ğŸŸ¡
| 0*
| Wichtige Hinweise, die beachtet werden **sollten**

| `INFO`
| ğŸ”µ
| 0
| Empfehlungen zur Verbesserung

|===

*_Exit Code bei WARN hÃ¤ngt vom fail-level ab_

== ğŸ”„ Das Vererbungsprinzip

=== Grundregel

[.lead]
**Spezifischere Regeln Ã¼berschreiben allgemeinere Regeln**

[.text-center]
....
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Niedrigste PrioritÃ¤t               â”‚
â”‚                                                 â”‚
â”‚  SECTION-LEVEL SEVERITY                         â”‚
â”‚  â””â”€â–º BLOCK-LEVEL SEVERITY                       â”‚
â”‚      â””â”€â–º RULE-LEVEL SEVERITY                    â”‚
â”‚          â””â”€â–º NESTED RULE SEVERITY               â”‚
â”‚                                                 â”‚
â”‚              HÃ¶chste PrioritÃ¤t                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
....

=== Visuelles Beispiel

[plantuml, severity-flow, svg]
----
@startuml
!theme plain
skinparam defaultFontSize 14
skinparam rectangle {
    BackgroundColor<<error>> #FFCCCC
    BackgroundColor<<warn>> #FFFFCC
    BackgroundColor<<info>> #CCCCFF
    BorderColor #333333
}

rectangle "Section\nseverity: warn" <<warn>> as section
rectangle "Block (paragraph)\nseverity: error" <<error>> as block
rectangle "Rule (lines)\nseverity: info" <<info>> as rule
rectangle "Final Severity:\nINFO" <<info>> as final

section -down-> block : "Ã¼berschrieben von"
block -down-> rule : "Ã¼berschrieben von"
rule -down-> final : "EndgÃ¼ltiger Wert"

note right of section
  Basis-Severity fÃ¼r
  alle Kinder
end note

note right of block
  Ãœberschreibt Section
  fÃ¼r diesen Block
end note

note right of rule
  HÃ¶chste PrioritÃ¤t
  gewinnt immer
end note
@enduml
----

== ğŸ“‹ Praktische Beispiele

=== Beispiel 1: Einfache Vererbung

[source,yaml]
----
document:
  sections:
    - name: "API-Dokumentation"
      severity: error         # <1>
      blocks:
        - paragraph:          # <2>
            minLines: 5       # <3>
----

<1> Alle Regeln in dieser Section haben standardmÃ¤ÃŸig `ERROR`
<2> Kein eigenes severity â†’ erbt `ERROR` von Section
<3> Diese Regel hat Severity `ERROR` (geerbt)

=== Beispiel 2: Block Ã¼berschreibt Section

[source,yaml]
----
document:
  sections:
    - name: "Beispiele"
      severity: error         # <1>
      blocks:
        - paragraph:
            severity: warn    # <2>
            minLines: 3       # <3>
        - listing:            # <4>
            language:
              required: true  # <5>
----

<1> Section-Default ist `ERROR`
<2> Paragraph-Block Ã¼berschreibt mit `WARN`
<3> Diese Regel hat Severity `WARN` (vom Block geerbt)
<4> Listing-Block hat kein severity â†’ erbt `ERROR` von Section
<5> Diese Regel hat Severity `ERROR` (von Section geerbt)

=== Beispiel 3: VollstÃ¤ndige Hierarchie

[source,yaml]
----
document:
  sections:
    - name: "Konfiguration"
      severity: warn                    # <1>
      blocks:
        - table:
            severity: error             # <2>
            header:
              required: true            # <3>
            caption:
              required: true
              pattern: "^Tabelle \\d+:"
              severity: info            # <4>
----

<1> Section-Level: `WARN`
<2> Block-Level: `ERROR` (Ã¼berschreibt Section)
<3> Erbt `ERROR` vom Block
<4> Regel-Level: `INFO` (Ã¼berschreibt Block)

== ğŸ¨ Visualisierung der Beispiele

=== Vererbungs-Baum

[.text-center]
....
Konfiguration (Section) [WARN]
â”‚
â””â”€ table (Block) [ERROR] â† Ã¼berschreibt
   â”‚
   â”œâ”€ header.required [ERROR] â† erbt von Block
   â”‚
   â””â”€ caption
      â”œâ”€ caption.required [ERROR] â† erbt von Block  
      â””â”€ caption.pattern [INFO] â† Ã¼berschreibt mit eigenem Wert
....

=== Flussdiagramm

[plantuml, example-flow, svg]
----
@startuml
start
:Section: severity = WARN;
if (Block hat eigene severity?) then (ja)
  :Block: severity = ERROR;
  if (Regel hat eigene severity?) then (ja)
    :Regel: severity = INFO;
    :Finale Severity = **INFO**;
  else (nein)
    :Finale Severity = **ERROR**;
  endif
else (nein)
  :Finale Severity = **WARN**;
endif
stop
@enduml
----

== ğŸš€ Best Practices

[cols="1,3", options="header"]
|===
| Empfehlung | BegrÃ¼ndung

| **Globale Standards setzen**
| Definieren Sie Section-Level Severity fÃ¼r konsistente Basis

| **Gezielt Ã¼berschreiben**
| Nur wenn ein Block/Regel spezielle Behandlung braucht

| **INFO fÃ¼r optionale Verbesserungen**
| Verwenden Sie INFO fÃ¼r Stilrichtlinien, die optional sind

| **WARN fÃ¼r wichtige Konventionen**
| Team-Standards, die eingehalten werden sollten

| **ERROR fÃ¼r kritische Strukturen**
| Pflichtfelder, kritische Formate, Sicherheitsaspekte
|===

== âš ï¸ HÃ¤ufige Fallstricke

=== Fallstrick 1: Severity vergessen

[source,yaml]
----
# FALSCH - Block-Severity fehlt
blocks:
  - paragraph:      # âŒ Kein severity!
      lines:
        min: 5
        severity: error
----

[source,yaml]
----
# RICHTIG - Block hat Pflicht-Severity
blocks:
  - paragraph:
      severity: warn     # âœ… Block-Severity gesetzt
      lines:
        min: 5
        severity: error  # Optional: Ãœberschreibt Block-Severity
----

=== Fallstrick 2: Vererbung missverstehen

[source,yaml]
----
sections:
  - name: "Test"
    severity: error
    blocks:
      - paragraph:
          severity: info      # â† Dieser Block ist jetzt INFO
      - listing:              # â† Dieser Block ist immer noch ERROR!
          language:
            required: true
----

== ğŸ“Š Severity-Matrix

Diese Matrix zeigt alle mÃ¶glichen Kombinationen:

[cols="20,20,20,20,20", options="header"]
|===
| Section | Block | Rule | Nested | **Resultat**

| WARN
| -
| -
| -
| **WARN**

| WARN
| ERROR
| -
| -
| **ERROR**

| WARN
| ERROR
| INFO
| -
| **INFO**

| ERROR
| -
| -
| INFO
| **INFO**

| ERROR
| WARN
| -
| ERROR
| **ERROR**
|===

== ğŸ”— WeiterfÃ¼hrende Themen

* link:rule-hierarchy-diagram.adoc[Regel-Hierarchie verstehen]
* link:../user-guide/configuration.adoc#severity-hierarchie[Severity in der Konfiguration]
* link:../reference/cli-options.adoc#fail-level[Fail-Level und Exit-Codes]
* link:../troubleshooting.adoc#severity-probleme[Troubleshooting Severity]